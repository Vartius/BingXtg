<!doctype html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>RegexGenAI</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css">
  <style>
    :root{
      --brand:#7c6cff;           /* Accent */
      --brand-2:#0ea5e9;         /* Secondary accent */
      --bg:#0b0f14;              /* Page background */
      --surface:#121721;         /* Card surface */
      --border:#1f2937;          /* Borders */
      --text:#e5e7eb;            /* Primary text */
      --muted:#9ca3af;           /* Muted text */
      --success:#22c55e;
      --danger:#ef4444;
    }

    html[data-theme="dark"]{
      color-scheme: dark;
      --pico-background-color: var(--bg);
      --pico-color: var(--text);
      --pico-muted-color: var(--muted);
      --pico-primary: var(--brand);
      --pico-primary-hover: #6a57ff;
      --pico-secondary: var(--brand-2);
      --pico-muted-border-color: var(--border);
      --pico-form-element-background-color: #0f141d;
      --pico-card-background-color: var(--surface);
      --pico-form-element-active-border-color: var(--brand);
      --pico-form-element-focus-color: color-mix(in oklab, var(--brand) 50%, white);
      --pico-border-radius: 12px;
    }

    body{ font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', Arial, sans-serif; background: radial-gradient(1200px 600px at 100% -10%, rgba(124,108,255,.15), transparent 60%), radial-gradient(1000px 500px at -10% 0%, rgba(14,165,233,.12), transparent 50%), var(--bg); }

    /* Navbar */
    nav.container-fluid{
      position: sticky; top: 0; z-index: 50; backdrop-filter: saturate(140%) blur(8px);
      background: linear-gradient(180deg, rgba(18,23,33,.9), rgba(18,23,33,.6));
      border-bottom: 1px solid var(--border);
    }
    .brand{ display:flex; gap:.6rem; align-items:center; font-weight:700; letter-spacing:.2px; }
    .brand svg{ width:22px; height:22px; color:var(--brand); }

    main.container{ max-width: 1100px; }

    /* Cards & layout */
    .grid-two{ display:grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1rem; }
    /* Wider right column for channels on larger screens */
    @media (min-width: 900px){
      .grid-two.grid-wide-right{ grid-template-columns: minmax(280px, 1fr) minmax(520px, 2fr); }
    }
    .card{ background: var(--surface); border:1px solid var(--border); border-radius: 14px; padding: 1rem 1.1rem; box-shadow: 0 6px 24px rgba(0,0,0,.25), inset 0 1px 0 rgba(255,255,255,.02); }
    .card h3{ margin-bottom:.25rem; }
    .muted{ color: var(--muted); }

    /* Lists */
    ul.clean{ list-style:none; padding-left:0; margin:0; }

    /* Rows */
    .item-row{ display:flex; align-items:center; justify-content:space-between; gap:.8rem; padding:.55rem 0; border-bottom: 1px dashed var(--border); }
    .item-row:last-child{ border-bottom: 0; }

    /* Channels list layout */
    .channel-item{ display:grid; grid-template-columns: minmax(0,1fr) 280px; gap: 1rem; align-items:center; }
    @media (max-width: 700px){
      .channel-item{ grid-template-columns: 1fr; }
    }
    .channel-left{ min-width:0; }
    .channel-name{ font-weight:600; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
    .channel-sub{ color: var(--muted); font-size:.85rem; margin-top:.15rem; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }

    .channel-progress{ display:flex; flex-direction:column; gap:.35rem; }
    .channel-progress progress{ width:100%; height: 10px; }
    .channel-progress .meta{ display:flex; justify-content:space-between; color: var(--muted); font-size:.8rem; }

    /* Small helper */
    .copy-btn{ appearance:none; border:0; background:transparent; color: var(--muted); cursor:pointer; padding:.1rem .25rem; border-radius:6px; }
    .copy-btn:hover{ color: var(--brand); background: rgba(124,108,255,.08); }

    /* Progress */
    progress{ width:100%; height: 10px; border-radius: 999px; overflow:hidden; background:#0f172a; border:1px solid var(--border); }
    progress::-webkit-progress-bar{ background:#0f172a; }
    progress::-webkit-progress-value{ background: linear-gradient(90deg, var(--brand), var(--brand-2)); }
    progress::-moz-progress-bar{ background: linear-gradient(90deg, var(--brand), var(--brand-2)); }

    /* Confidence themed progress */
    progress.progress-success::-webkit-progress-value{ background: linear-gradient(90deg, var(--success), color-mix(in oklab, var(--success) 60%, white)); }
    progress.progress-danger::-webkit-progress-value{ background: linear-gradient(90deg, var(--danger), color-mix(in oklab, var(--danger) 60%, white)); }
    progress.progress-success::-moz-progress-bar{ background: linear-gradient(90deg, var(--success), color-mix(in oklab, var(--success) 60%, white)); }
    progress.progress-danger::-moz-progress-bar{ background: linear-gradient(90deg, var(--danger), color-mix(in oklab, var(--danger) 60%, white)); }

    /* Forms */
    form .grid{ display:grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: .8rem; }
    fieldset{ border-color: var(--border); background: color-mix(in oklab, var(--surface) 92%, black); }

    /* Buttons */
    .btn-group{ display:flex; gap:.6rem; flex-wrap:wrap; }
    .btn-success{ background: color-mix(in oklab, var(--success) 70%, black); border-color: color-mix(in oklab, var(--success) 60%, black); }
    .btn-danger{ background: color-mix(in oklab, var(--danger) 70%, black); border-color: color-mix(in oklab, var(--danger) 60%, black); }

    /* Message bubble */
    .message{ white-space: pre-wrap; background:#0c121b; border:1px solid var(--border); border-radius:12px; padding: .9rem; line-height:1.5; }

    /* Footer */
    footer{ margin-top:2rem; padding:1.2rem 0; border-top:1px solid var(--border); color:var(--muted); font-size:.9rem; }

    /* Channels list enhancements */
    .channel-item{ align-items:flex-start; }
    .channel-name{ font-weight:600; }
    .copy-id{ cursor:pointer; color: var(--text); text-decoration: none; }
    .copy-id:hover{ color: var(--brand-2); }
    .tooltip{ position: relative; }
    .tooltip::after{
      content: attr(data-tooltip);
      position: absolute; left:50%; bottom: 100%; transform: translate(-50%, -120%);
      background:#0b0f14; color: var(--muted); border:1px solid var(--border);
      padding:.25rem .5rem; border-radius:8px; font-size:.75rem; white-space: nowrap;
      opacity:0; pointer-events:none; transition: opacity .15s ease, transform .15s ease;
      box-shadow: 0 6px 24px rgba(0,0,0,.35); z-index: 20;
    }
    /* Show tooltip only on hover or focus-visible to avoid double activation */
    .tooltip:hover::after, .tooltip:focus-visible::after{ opacity:.95; transform: translate(-50%, -140%); }

    /* Compact progress for per-channel stats */
    progress.progress-compact{ height:6px; }

    /* Toast for copy feedback */
    .toast{ position: fixed; left:50%; bottom:24px; transform: translateX(-50%) translateY(20px);
      background:#0f172a; border:1px solid var(--border); color: var(--text);
      padding:.5rem .8rem; border-radius:999px; box-shadow: 0 6px 24px rgba(0,0,0,.35);
      opacity:0; pointer-events:none; transition: opacity .2s ease, transform .2s ease; z-index:1000; }
    .toast.show{ opacity:1; transform: translateX(-50%) translateY(0); }
  </style>
</head>
<body>
  <nav class="container-fluid">
    <ul>
      <li>
        <strong class="brand">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 7l9-4 9 4-9 4-9-4zm0 5l9 4 9-4m-9 4v7"/>
          </svg>
          Trading Bot AI
        </strong>
      </li>
    </ul>
    <ul>
      <li><a href="/">Trading Dashboard</a></li>
      <li><a href="/ai/">AI Dashboard</a></li>
      <li><a href="/ai/extract/">Extract</a></li>
      <li><a href="/ai/label/">Label</a></li>
      <li><a href="/ai/train/">Train</a></li>
    </ul>
  </nav>
  <main class="container">
    {% block content %}{% endblock %}
    <footer>
      <small>Built with PicoCSS</small>
    </footer>
  </main>
  <script>
    // Copy channel id on click and show a toast
    (() => {
      const toast = document.createElement('div');
      toast.id = 'toast';
      toast.className = 'toast';
      document.body.appendChild(toast);

      const showToast = (msg) => {
        toast.textContent = msg;
        toast.classList.add('show');
        clearTimeout(toast._t);
        toast._t = setTimeout(() => toast.classList.remove('show'), 1300);
      };

      document.addEventListener('click', (e) => {
        const el = e.target.closest('[data-copy-id]');
        if (!el) return;
        e.preventDefault();
        const id = el.dataset.copyId;
        navigator.clipboard?.writeText(id)
          .then(() => showToast(`Copied ID ${id}`))
          .catch(() => showToast('Copy failed'));
      });

      document.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          const el = document.activeElement;
          if (el && el.hasAttribute('data-copy-id')) {
            const id = el.getAttribute('data-copy-id');
            navigator.clipboard?.writeText(id)
              .then(() => showToast(`Copied ID ${id}`))
              .catch(() => showToast('Copy failed'));
            e.preventDefault();
          }
        }
      });
    })();
  </script>
</body>
</html>